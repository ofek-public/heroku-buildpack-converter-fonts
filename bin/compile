#!/usr/bin/env bash

function indent() {
	c='s/^/       /'
	case $(uname) in
		Darwin) sed -l "$c";;
		*)      sed -u "$c";;
	esac
}

BUILD_DIR="$1"
SOURCE_DIR="$(dirname $0)/../fonts.tar.gz"
TARGET_DIR="$BUILD_DIR/.fonts"
wget https://github.com/salesforce-ux/design-system/archive/master.tar.gz -O "$(dirname $0)/../salesforce-ux.tar.gz"
echo "-----> Extracting fonts to $TARGET_DIR"

mkdir -p "$TARGET_DIR"
tar -xvzf "$SOURCE_DIR" -C "$TARGET_DIR" | indent
mkdir -p "$(dirname $0)/../salesforce-ux"
tar -xvzf "$(dirname $0)/../salesforce-ux.tar.gz" -C "$(dirname $0)/../salesforce-ux" | indent

mv -vf "$(dirname $0)/../salesforce-ux/salesforce-lightning-design-system-2.3.2/assets/fonts/*.ttf" "$TARGET_DIR" | indent
